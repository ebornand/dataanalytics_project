---
title: "Data Analytics Project"
description: |
  Elea Bornand & Roman Alt
site: distill::distill_website
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

# Learn more about creating websites with Distill at:
# https://rstudio.github.io/distill/website.html

```

# Introduction
some introductory stuff here :)

# Data
some Infos about our Data, where we got it from and how it is built. (different languages etc.)

# Method
how are we going to use that data. what variables are important, do we have a model to fit to the data etc.

# Results
atm just a display of the data we manipulated

```{r echo=FALSE, eval=FALSE}
install.packages("rjson")
install.packages("ggplot2")
library("rjson")
library("ggplot2")

de_json <- fromJSON(file = "http://hedonometer.org/api/v1/happiness/?format=json&timeseries__title=de_all&date__gte=2021-08-24&limit=1000")
en_json <- fromJSON(file = "http://hedonometer.org/api/v1/happiness/?format=json&timeseries__title=en_all&date__gte=2021-08-24&limit=1000")
ru_json <- fromJSON(file = "http://hedonometer.org/api/v1/happiness/?format=json&timeseries__title=ru_all&date__gte=2021-08-24&limit=1000")

# data_json contains two lists: meta and objects. we need to convert the objects-list into a nice dataframe
# we need to loop through the objects list. each element in data_json$objects contains another list with all the data for one day
# we create a vector for each variable
date <- c()
frequency <- c()
happiness <- c()
timeseries <- c()
# we loop through each element in data_json$objects and sort the parameters into their respective vector
for (i in de_json$objects) {
  date <- append(date, as.Date(i$date))
  frequency <- append(frequency, i$frequency)
  happiness <- append(happiness, i$happiness)
  timeseries <- append(timeseries, i$timeseries)
}
#creating the english language data frame
data_de <- data.frame(date = date, frequency = frequency, happiness = happiness, timeseries = timeseries)

date <- c()
frequency <- c()
happiness <- c()
timeseries <- c()

for (i in en_json$objects) {
  date <- append(date, as.Date(i$date))
  frequency <- append(frequency, i$frequency)
  happiness <- append(happiness, i$happiness)
  timeseries <- append(timeseries, i$timeseries)
}
#creating the german language data frame
data_de <- data.frame(date = date, frequency = frequency, happiness = happiness, timeseries = timeseries)

date <- c()
frequency <- c()
happiness <- c()
timeseries <- c()

for (i in ru_json$objects) {
  date <- append(date, as.Date(i$date))
  frequency <- append(frequency, i$frequency)
  happiness <- append(happiness, i$happiness)
  timeseries <- append(timeseries, i$timeseries)
}
#creating the russian language data frame
data_ru <- data.frame(date = date, frequency = frequency, happiness = happiness, timeseries = timeseries)

plot1 <- ggplot(data, aes(x = date, y = happiness, group = 1)) +
  geom_line() +
  geom_point() +
  geom_smooth() +
  theme_light()
```

here are some graphs:

```{r}
plot1

```
